classDiagram
    direction TB

%% ================== BACKEND (Spring Boot + Kotlin) ==================
    namespace Backend {
        class User {
            +UUID id
            +String firebaseUid
            +String email
            +String name
            +List~String~ interests
            +String geohash
            +Double lat
            +Double lng
            +LocalDateTime createdAt
        }

        class Event {
            +UUID id
            +String title
            +String description
            +String geohash
            +Double lat
            +Double lng
            +LocalDateTime date
            +UUID creatorId
            +List~User~ attendees
        }

        class UserEvent {
            +UUID userId
            +UUID eventId
            +RsvpStatus status
        }

        class BlockedUser {
            +UUID blockerId
            +UUID blockedId
        }

        class UserController {
            +getNearbyUsers()
            +getEventsNearby()
            +createEvent()
            +rsvpEvent()
            +blockUser()
        }

        class EventController

        class AuthController {
            +validateToken()
        }

        class JwtAuthenticationFilter {
            -FirebaseAuth firebaseAuth
            +doFilterInternal()
        }

        class FirebaseToken {
            +verify() FirebaseToken
        }

        class AuthenticatedUserIdProvider {
            +getAuthenticatedUserId() String
        }

        class FirebaseConfig {
            +firebaseAuth() FirebaseAuth
        }

        class SecurityConfig {
            +securityFilterChain()
        }
    }

%% ================== FRONTEND (KMP - Compose Multiplatform) ==================
    namespace Frontend {
        class OnboardingScreen {
            +Content()
        }

        class RegisterScreen {
            +Content()
        }

        class LoginScreen {
            +Content()
        }

        class HomeScreen {
            +NearbyUsersList()
            +NearbyEventsList()
        }

        class ProfileScreen {
            +EditInterests()
            +UpdateLocation()
        }

        class EventDetailScreen

        class AppNavigator {
            +Navigator(OnboardingScreen)
        }

        class FirebaseAuthManager {
            +signInWithEmail()
            +signInWithGoogle()
            +getIdToken() String
        }

        class ApiClient {
            +getNearbyUsers(token: String)
            +getNearbyEvents(token: String)
            +createEvent()
        }
    }

%% ================== RELATIONSHIPS ==================
    User "1" --> "0..*" Event : creates
    User "1" --> "0..*" UserEvent : participates in
    User "1" --> "0..*" BlockedUser : blocks
    Event "1" --> "0..*" UserEvent : has attendees

    UserController --> User
    EventController --> Event
    JwtAuthenticationFilter --> FirebaseToken
    JwtAuthenticationFilter --> FirebaseAuth
    AuthenticatedUserIdProvider --> SecurityContextHolder
    SecurityConfig --> JwtAuthenticationFilter

    OnboardingScreen --> FirebaseAuthManager
    RegisterScreen --> FirebaseAuthManager
    HomeScreen --> ApiClient
    ProfileScreen --> ApiClient
    ApiClient --> UserController
    ApiClient --> EventController

%% ================== ENUMS ==================
    class RsvpStatus {
        <<enumeration>>
        GOING
        INTERESTED
        NOT_GOING
    }

    UserEvent --> RsvpStatus

%% ================== STYLING ==================
%%classDef backend fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#b71c1c
%%classDef frontend fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#1b5e20
%%classDef entity fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
%%
%%class User,Event,UserEvent,BlockedUser entity
%%class UserController,EventController,AuthController,JwtAuthenticationFilter,FirebaseToken,AuthenticatedUserIdProvider,FirebaseConfig,SecurityConfig backend
%%class OnboardingScreen,RegisterScreen,LoginScreen,HomeScreen,ProfileScreen,EventDetailScreen,AppNavigator,FirebaseAuthManager,ApiClient frontend